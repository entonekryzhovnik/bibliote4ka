# ๏ฟฝ๏ฟฝ ะะฝะปะฐะนะฝ-ะฑะธะฑะปะธะพัะตัะบะฐ ๐งธ

ะะธะบัะพัะตัะฒะธัะธะบ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฑะธะฑะปะธะพัะตะบะพะน ั ะฐะดะผะธะฝัะบะธะผ ะดะพัััะฟะพะผ ะธ middleware ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ โจ

## ๐๏ธ ะงัะพ ะฝะฐะผ ะฟะพะฝะฐะดะพะฑะธััั ๐งธ

- Go 1.21 ะธะปะธ ะฝะพะฒะตะต
- Docker ะธ Docker Compose
- PostgreSQL 15 (ะฑัะดะตั ะทะฐะฟััะตะฝ ะฒ Docker)

## ๐ ะะฐัะธะฝะฐะตะผ ัะฐะฑะพัั ๐งธ

1. ะะปะพะฝะธััะตะผ ัะตะฟะพะทะธัะพัะธะน:
```bash
git clone <repository-url>
cd <repository-name>
```

2. ะะฐะฟััะบะฐะตะผ ะฑะฐะทั ะดะฐะฝะฝัั:
```bash
make up
```

3. ะะฐะฟััะบะฐะตะผ ะฟัะธะปะพะถะตะฝะธะต:
```bash
make run
```

ะกะตัะฒะตััะธะบ ะทะฐะฟัััะธััั ะฝะฐ ะฟะพััั 8080 ๐ ๐งธ

## ๐ก API Endpoints ๐งธ

### ๐ ะัะฑะปะธัะฝัะต ัะฝะดะฟะพะธะฝัั

- `GET /books` - ัะฟะธัะพะบ ะบะฝะธะถะตัะตะบ (ั ัะธะปัััะฐะผะธ) ๐
- `GET /books/{id}` - ะฟะพะปััะธัั ะบะฝะธะถะตัะบั ะฟะพ ID ๐
- `POST /books/{id}/take` - ะฒะทััั ะบะฝะธะถะตัะบั ๐ฅ
- `POST /books/{id}/return` - ะฒะตัะฝััั ะบะฝะธะถะตัะบั ๐ค

### ๐ ะะดะผะธะฝัะบะธะต ัะฝะดะฟะพะธะฝัั

ะัะต ะฐะดะผะธะฝัะบะธะต ัะฝะดะฟะพะธะฝัั ััะตะฑััั ะทะฐะณะพะปะพะฒะพะบ `X-Admin-Secret` ๐ซ

- `POST /books` - ะดะพะฑะฐะฒะธัั ะบะฝะธะถะตัะบั โ
- `PUT /books/{id}` - ะพะฑะฝะพะฒะธัั ะบะฝะธะถะตัะบั โ๏ธ
- `DELETE /books/{id}` - ัะดะฐะปะธัั ะบะฝะธะถะตัะบั ๐๏ธ

## โ๏ธ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ๐งธ

- `DB_HOST` - ัะพััะธะบ ะฑะฐะทั ะดะฐะฝะฝัั (ะฟะพ ัะผะพะปัะฐะฝะธั: localhost) ๐
- `DB_PORT` - ะฟะพััะธะบ ะฑะฐะทั ะดะฐะฝะฝัั (ะฟะพ ัะผะพะปัะฐะฝะธั: 5433) ๐
- `DB_USER` - ะฟะพะปัะทะพะฒะฐัะตะปั ะฑะฐะทั ะดะฐะฝะฝัั (ะฟะพ ัะผะพะปัะฐะฝะธั: postgres) ๐ค
- `DB_PASSWORD` - ะฟะฐัะพะปั ะฑะฐะทั ะดะฐะฝะฝัั (ะฟะพ ัะผะพะปัะฐะฝะธั: postgres) ๐
- `DB_NAME` - ะธะผั ะฑะฐะทั ะดะฐะฝะฝัั (ะฟะพ ัะผะพะปัะฐะฝะธั: library) ๐
- `ADMIN_SECRET` - ัะตะบัะตัะฝัะน ะบะปััะธะบ ะดะปั ะฐะดะผะธะฝัะบะพะณะพ ะดะพัััะฟะฐ (ะฟะพ ัะผะพะปัะฐะฝะธั: admin-secret) ๐ซ
- `SERVER_PORT` - ะฟะพััะธะบ ัะตัะฒะตัะฐ (ะฟะพ ัะผะพะปัะฐะฝะธั: 8080) ๐

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ ๐งธ

### ๐ณ ะะฐะทะฐ ะดะฐะฝะฝัั

ะะฐะทะฐ ะดะฐะฝะฝัั ะทะฐะฟััะบะฐะตััั ะฒ Docker ะบะพะฝัะตะนะฝะตัะต ๐ณ

ะะฐะฟััะบะฐะตะผ:
```bash
make up
```

ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ:
```bash
make down
```

ะกะผะพััะธะผ ะปะพะณะธะบะธ:
```bash
make logs
```

ะกะฑัะฐััะฒะฐะตะผ ะฑะฐะทั:
```bash
make down -v
make up
```

### ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

ะะฐะฟััะบะฐะตะผ ัะตััะธะบะธ:
```bash
make test
```

## ๐ ะัะธะผะตััะธะบะธ ะทะฐะฟัะพัะธะบะพะฒ ๐งธ

### ะกะพะทะดะฐะตะผ ะบะฝะธะถะตัะบั (ะฐะดะผะธะฝ) ๐
```bash
curl -X POST http://localhost:8080/books \
  -H "Content-Type: application/json" \
  -H "X-Admin-Secret: admin-secret" \
  -d '{
    "title": "ะะพะนะฝะฐ ะธ ะผะธั",
    "author": "ะะตะฒ ะขะพะปััะพะน",
    "published": 1869,
    "pages": 1225
  }'
```

### ะะพะปััะฐะตะผ ัะฟะธัะพะบ ะบะฝะธะถะตัะตะบ ๐
```bash
curl http://localhost:8080/books
```

### ะะตัะตะผ ะบะฝะธะถะตัะบั ๐
```bash
curl -X POST http://localhost:8080/books/{id}/take \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com"
  }' 